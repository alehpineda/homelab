services:
  samba:
    image: dperson/samba:latest
    container_name: samba
    restart: unless-stopped
    environment:
      - TZ=${TZ:-UTC}
      - USERID=${PUID:-1000}
      - GROUPID=${PGID:-1000}
    ports:
      - "139:139"
      - "445:445"
    volumes:
      - ${STORAGE_PATH}:/storage
      - ${ARCADE_PATH:-/mnt/arcade}:/arcade
    command: >
      -r
      -u "${SAMBA_USER:-deathscythe};${SAMBA_PASSWORD}"
      -s "storage;/storage;yes;no;no;${SAMBA_USER:-deathscythe};${SAMBA_USER:-deathscythe};Storage Share"
      -s "arcade;/arcade;yes;no;no;${SAMBA_USER:-deathscythe};${SAMBA_USER:-deathscythe};Arcade ROMs"
      -p
    networks:
      - samba-net
    security_opt:
      - no-new-privileges:true

networks:
  samba-net:
    driver: bridge
